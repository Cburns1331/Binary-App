<ion-view view-title="What is Binary?">
    <ion-content>
        <body>

            Conversion Type: <br>
            <select name="select" onchange="S()">
                <option value="blank"></option>
                <option value="Binary">Binary to Decimal</option>
                <option value="Decimal">Decimal to Binary</option>
            </select><br>

            <div id="choice" style="display:none">
                Input:<br>
                <input id="in" type="text"><br>
                Output:<br>
                <input id="oneCheck" type="checkbox" onclick="addIn('oneCheck')">Ones Complement<br>
                <input id="twoCheck" type="checkbox" onclick="addIn('twoCheck')">Twos Complement<br>
                <input id="unsignCheck" type="checkbox" onclick="addIn('unsignCheck')">Unsigned<br>
                <div id="onein" style="display:none">
                    <input id="one" type="text"> Ones Complement
                </div>
                <div id="twoin" style="display:none">
                    <input id="two" type="text"> Twos Complement
                </div>
                <div id="unsignin" style="display:none">
                    <input id="unsign" type="text"> Unsigned
                </div>
                <button type="button" id="convert" style="display:none" onclick="BinaryConversion()">Convert!</button>
            </div>
            <p id="para1"> para1 </p>
            <p id="para2"> para2 </p>




            <script>
                //PUT IN THINGS FOR WHEN THE USER PUTS IN BAD Input
                //MAYBE PUT IN A RESET BUTTON
                //NEED CSS

                function S() {
                    var e = document.getElementsByName("select")[0].value;
                    if (e === "blank") {
                        document.getElementById("choice").style.display = "none";
                    }
                    else {
                        //binary to decimal
                        document.getElementById("para1").innerHTML = "wow";
                        document.getElementById("choice").style.display = "block";
                    }
                }


                function addIn(x) {
                    str = x + 'in';
                    if (document.getElementById(x).checked == true) {
                        document.getElementById(str).style.display = "block";
                        document.getElementById("convert").style.display = "block";
                    }
                    else {
                        document.getElementById(str).style.display = "none";
                        if (document.getElementById("oneCheck").checked == false
                            && document.getElementById("twoCheck").checked == false
                            && document.getElementById("unsignCheck").checked == false) {
                            document.getElementById("convert").style.display = "none";
                        }

                    }
                }



                function BinarytoDecimal(input) {
                    if (input === "") {
                        return 0;
                    }
                    var num = 0;
                    var scale = 1;
                    for (var i = input.length - 1; !(i < 0) ; i--) {
                        var current = input.charAt(i);
                        if (current == '1') {
                            num += scale;
                        }
                        scale *= 2;
                    }
                    return num;
                }
                function TwoComplement(input) {
                    var str = input.slice(1, input.length - 1);
                    var num = BinarytoDecimal(str);
                    var ch = input.charAt(0);
                    //if(ch
                }



                function OneComplement(input) {
                    if (input.charAt(0) == '0') {
                        return BinarytoDecimal(input);
                        //negative
                    } else if (input.charAt(0) == '1') {
                        var stringOutput = "";
                        var isZero = true;
                        //Flip the binary number
                        for (var i = 0; i < input.length; i++) {
                            var currentChar = input.charAt(i);
                            if (currentChar == '1') {
                                stringOutput = stringOutput.concat("0");
                            } else if (currentChar == '0') {
                                stringOutput = stringOutput.concat("1");
                            }
                        }
                        //Is the value zero?
                        for (var i = 0; i < stringOutput.length; i++) {
                            var currChar = stringOutput.charAt(i);
                            if (currChar == '1') {
                                isZero = false;
                            }
                        }

                        if (isZero) {
                            return "-0";
                        } else {
                            var strResult = "-";
                            strResult = strResult.concat(BinarytoDecimal(stringOutput))
                            return strResult;
                        }
                    }
                    return 0;
                }


                function BinaryConversion() {
                    var input = document.getElementById("input").value;

                    //binary to decimal
                    if (document.getElementsByName[0].value === "Binary") {
                        if (document.getElementById("oneCheck").checked == true) {
                            document.getElementById("one").value = OneComplement(input);
                        }
                        if (document.getElementById("twoCheck").checked == true) {
                            document.getElementById("two").value = TwoComplement(input);
                        }
                        if (document.getElementById("unsignCheck").checked == true) {
                            document.getElementById("unsign").value = BinarytoDecimal(input);
                        }
                    }
                    else if (document.getElementById("input").value === "Decimal") {
                        //do things for decimal
                    }
                    else {
                        return;
                    }

                }
            </script>


        </body>
    </ion-content>
</ion-view>